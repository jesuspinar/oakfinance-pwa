import{C as tt,D as et,G as nt,H as it,I as ot,M as rt,N as at,O as st,a as K,e as W,g as X,h as Y,l as H,m as q,q as J,r as Q,s as Z}from"./chunk-7LX46XF4.js";import{$ as y,Aa as V,Ba as z,D as m,Ea as L,F as h,H as R,K as F,M as I,R as f,S as d,T as c,U as w,_ as N,aa as x,c as P,ja as b,kb as $,mb as j,n as A,na as U,oa as B,pa as D,q as E,tb as G,v as T,w as k}from"./chunk-32E675WK.js";import{a as u,b as g,h as s}from"./chunk-B7O3QC5Z.js";var It=(()=>{let e=class e{constructor(t){this.settingsService=t,this.symbol="$",this.settingsService.getSettings().subscribe(i=>{this.symbol=i.currencySymbol})}transform(t){let o=(typeof t=="string"?parseFloat(t):t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",");return`${this.symbol}${o}`}};e.\u0275fac=function(i){return new(i||e)(h(st,16))},e.\u0275pipe=F({name:"appCurrency",type:e,pure:!1});let n=e;return n})();var r=[];for(let n=0;n<256;++n)r.push((n+256).toString(16).slice(1));function ct(n,e=0){return(r[n[e+0]]+r[n[e+1]]+r[n[e+2]]+r[n[e+3]]+"-"+r[n[e+4]]+r[n[e+5]]+"-"+r[n[e+6]]+r[n[e+7]]+"-"+r[n[e+8]]+r[n[e+9]]+"-"+r[n[e+10]]+r[n[e+11]]+r[n[e+12]]+r[n[e+13]]+r[n[e+14]]+r[n[e+15]]).toLowerCase()}var _,ut=new Uint8Array(16);function C(){if(!_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_=crypto.getRandomValues.bind(crypto)}return _(ut)}var mt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),v={randomUUID:mt};function pt(n,e,a){n=n||{};let t=n.random??n.rng?.()??C();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){if(a=a||0,a<0||a+16>e.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[a+i]=t[i];return e}return ct(t)}function ft(n,e,a){return v.randomUUID&&!e&&!n?v.randomUUID():pt(n,e,a)}var S=ft;var kt=(()=>{let e=class e{constructor(t){this.storage=t,this.STORAGE_KEY="recurring_payments",this.payments$=new P([]),this.storageReady=!1,this.initStorage()}initStorage(){return s(this,null,function*(){yield this.storage.create(),this.storageReady=!0,yield this.loadPayments()})}ensureStorageReady(){return s(this,null,function*(){this.storageReady||(yield this.initStorage())})}getPayments(){return this.payments$.asObservable()}getAll(){return s(this,null,function*(){return yield this.ensureStorageReady(),((yield this.storage.get(this.STORAGE_KEY))||[]).map(i=>this.deserializePayment(i))})}getByType(t){return s(this,null,function*(){return(yield this.getAll()).filter(o=>o.isActive&&o.type===t).sort((o,l)=>o.dayOfMonth-l.dayOfMonth)})}getAllSortedByDay(){return s(this,null,function*(){return(yield this.getAll()).filter(i=>i.isActive).sort((i,o)=>i.dayOfMonth-o.dayOfMonth)})}getById(t){return s(this,null,function*(){return(yield this.getAll()).find(o=>o.id===t)})}create(t){return s(this,null,function*(){yield this.ensureStorageReady();let i=g(u({},t),{id:S(),createdAt:new Date,isActive:!0}),o=yield this.getAll();return o.push(i),yield this.saveAll(o),i})}update(t,i){return s(this,null,function*(){yield this.ensureStorageReady();let o=yield this.getAll(),l=o.findIndex(p=>p.id===t);l!==-1&&(o[l]=u(u({},o[l]),i),yield this.saveAll(o))})}delete(t){return s(this,null,function*(){yield this.update(t,{isActive:!1})})}permanentDelete(t){return s(this,null,function*(){yield this.ensureStorageReady();let o=(yield this.getAll()).filter(l=>l.id!==t);yield this.saveAll(o)})}saveAll(t){return s(this,null,function*(){let i=t.map(o=>this.serializePayment(o));yield this.storage.set(this.STORAGE_KEY,i),yield this.loadPayments()})}loadPayments(){return s(this,null,function*(){let t=yield this.getAll();this.payments$.next(t)})}serializePayment(t){return g(u({},t),{createdAt:t.createdAt.toISOString()})}deserializePayment(t){return g(u({},t),{createdAt:new Date(t.createdAt)})}};e.\u0275fac=function(i){return new(i||e)(E(K))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var M=["cash-outline","cash","wallet-outline","wallet","card-outline","card","briefcase-outline","briefcase","trending-up-outline","trending-up","gift-outline","gift","business-outline","business"],O=["home-outline","home","water-outline","water","flash-outline","flash","wifi-outline","wifi","phone-portrait-outline","phone-portrait","car-outline","car","restaurant-outline","restaurant","cart-outline","cart","fitness-outline","fitness","medical-outline","medical","school-outline","school","film-outline","film","musical-notes-outline","musical-notes","game-controller-outline","game-controller","airplane-outline","airplane","train-outline","train","bus-outline","bus","bicycle-outline","bicycle","newspaper-outline","newspaper","tv-outline","tv","paw-outline","paw","leaf-outline","leaf","shield-outline","shield","construct-outline","construct","shirt-outline","shirt","bed-outline","bed","cafe-outline","cafe"],dt=[...M,...O].filter((n,e,a)=>a.indexOf(n)===e);function gt(n,e){if(n&1){let a=N();d(0,"ion-col",6)(1,"ion-button",7),y("click",function(){let i=T(a).$implicit,o=x();return k(o.selectIcon(i))}),w(2,"ion-icon",8),c()()}if(n&2){let a=e.$implicit,t=x();m(),f("color",t.selectedIcon===a?"primary":"medium"),m(),f("name",a)}}function ht(n,e){n&1&&(d(0,"div",9)(1,"ion-text",10)(2,"p"),b(3,"No icons found"),c()()())}var jt=(()=>{let e=class e{constructor(t){this.modalCtrl=t,this.allIcons=[],this.filteredIcons=[],this.searchTerm=""}ngOnInit(){this.type==="income"?this.allIcons=M:this.type==="expense"?this.allIcons=O:this.allIcons=dt,this.filteredIcons=[...this.allIcons]}filterIcons(){if(!this.searchTerm.trim()){this.filteredIcons=[...this.allIcons];return}let t=this.searchTerm.toLowerCase();this.filteredIcons=this.allIcons.filter(i=>i.toLowerCase().includes(t))}selectIcon(t){this.modalCtrl.dismiss({icon:t})}dismiss(){this.modalCtrl.dismiss()}};e.\u0275fac=function(i){return new(i||e)(h(rt))},e.\u0275cmp=R({type:e,selectors:[["app-icon-picker-modal"]],inputs:{selectedIcon:"selectedIcon",type:"type"},decls:14,vars:3,consts:[["slot","end"],[3,"click"],["name","close","slot","icon-only"],["placeholder","Search icons...","debounce","300",3,"ngModelChange","ionInput","ngModel"],["size","3","class","ion-text-center",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["size","3",1,"ion-text-center"],["fill","clear",1,"icon-button",3,"click","color"],["size","large",3,"name"],[1,"no-results"],["color","medium"]],template:function(i,o){i&1&&(d(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),b(3,"Select Icon"),c(),d(4,"ion-buttons",0)(5,"ion-button",1),y("click",function(){return o.dismiss()}),w(6,"ion-icon",2),c()()(),d(7,"ion-toolbar")(8,"ion-searchbar",3),D("ngModelChange",function(p){return B(o.searchTerm,p)||(o.searchTerm=p),p}),y("ionInput",function(){return o.filterIcons()}),c()()(),d(9,"ion-content")(10,"ion-grid")(11,"ion-row"),I(12,gt,3,2,"ion-col",4),c()(),I(13,ht,4,0,"div",5),c()),i&2&&(m(8),U("ngModel",o.searchTerm),m(4),f("ngForOf",o.filteredIcons),m(),f("ngIf",o.filteredIcons.length===0))},dependencies:[L,V,z,G,$,j,at,X,Y,H,q,J,Q,Z,tt,et,nt,it,ot,W],styles:["ion-grid[_ngcontent-%COMP%]{padding:16px}ion-col[_ngcontent-%COMP%]{padding:4px}.icon-button[_ngcontent-%COMP%]{height:56px;width:56px;margin:0;--background: #252525;--background-hover: #333333;--background-activated: #5CB299;--border-radius: 12px;--color: #B3B3B3}.icon-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.icon-button.selected[_ngcontent-%COMP%], .icon-button[_ngcontent-%COMP%]:active{--background: rgba($oak-green, .2);--color: #5CB299}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:200px;gap:8px}.no-results[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem;color:gray;opacity:.5}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#b3b3b3;margin:0}ion-searchbar[_ngcontent-%COMP%]{--background: #333333;--border-radius: 12px;--placeholder-color: #808080;--icon-color: #808080;--color: #FFFFFF;padding:8px 16px}"]});let n=e;return n})();export{jt as a,It as b,S as c,kt as d};
