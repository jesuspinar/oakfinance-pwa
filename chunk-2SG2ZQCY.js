import{a as je,b as $e,c as re,d as He}from"./chunk-73TVQXIM.js";import{A as Fe,B as Ne,D as ze,E as Re,F as X,G as Z,H as ee,K as Ve,L as te,M as ne,a as Ce,b as K,c as Se,d as be,e as Ie,f as $,g as H,h as Me,i as Ee,j as Oe,k as De,l as G,m as ke,n as Te,o as Y,p as Le,q,r as W,s as U,t as J,x as Q,y as Be,z as Ae}from"./chunk-ZNNOVYTL.js";import{a as we}from"./chunk-6FHDB4KP.js";import"./chunk-UQ5LYNUI.js";import"./chunk-QUJFQN2Y.js";import"./chunk-FWPKUFQQ.js";import"./chunk-TYL2GP6X.js";import"./chunk-SLD6GQLM.js";import"./chunk-FSCYZGDR.js";import"./chunk-N456CQOR.js";import"./chunk-6W3T3SO6.js";import"./chunk-QNCTVU3D.js";import"./chunk-ZXKGFOYV.js";import"./chunk-DRHJ5NHA.js";import"./chunk-U2SAPCD3.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-2JBNIPKT.js";import"./chunk-CKP3SGE2.js";import"./chunk-PKOVH7B7.js";import{a as j,b as Ke}from"./chunk-CGQ65MYN.js";import{$ as C,Aa as z,C as r,Ca as ge,Da as R,E as w,G as B,L as b,Q as u,R as a,S as i,T as _,Z as A,_ as x,c as L,ha as ae,ia as m,ib as I,ja as v,jb as V,ka as P,kb as ue,la as F,lb as he,ma as se,mb as ye,n as D,na as le,nb as fe,oa as de,ob as _e,q as k,ra as h,rb as xe,sa as f,sb as Pe,ta as N,tb as ve,u as E,v as O,ya as pe,za as me}from"./chunk-UOTJ5SCR.js";import"./chunk-34LRFQGT.js";import"./chunk-VYBL45FS.js";import"./chunk-D2O4WAW4.js";import"./chunk-N5NF6UWQ.js";import"./chunk-DNTR6X5U.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as S,b as M,h as p}from"./chunk-B7O3QC5Z.js";function Qe(s,c){s&1&&(a(0,"ion-text",17)(1,"p",18),m(2,"Name is required"),i()())}function Xe(s,c){s&1&&(a(0,"ion-text",17)(1,"p",18),m(2,"Amount must be greater than 0"),i()())}var Ge=(()=>{let c=class c{constructor(e,n){this.fb=e,this.modalCtrl=n,this.type="expense"}ngOnInit(){let e=new Date().toISOString().split("T")[0];this.paymentForm=this.fb.group({name:["",[I.required,I.minLength(1)]],amount:[0,[I.required,I.min(.01)]],dueDate:[e,I.required],iconName:["cash-outline",I.required],type:[this.type,I.required]})}openIconPicker(){return p(this,null,function*(){let e=yield this.modalCtrl.create({component:je,componentProps:{selectedIcon:this.paymentForm.value.iconName,type:this.paymentForm.value.type}});yield e.present();let{data:n}=yield e.onWillDismiss();n?.icon&&this.paymentForm.patchValue({iconName:n.icon})})}save(){if(this.paymentForm.valid){let e=this.paymentForm.value,n=new Date(e.dueDate),t=new Date;t.setHours(0,0,0,0);let o=n<t;this.modalCtrl.dismiss({payment:M(S({},e),{dueDate:n,isCompleted:o,completedDate:o?n:void 0})})}}dismiss(){this.modalCtrl.dismiss()}};c.\u0275fac=function(n){return new(n||c)(w(xe),w(te))},c.\u0275cmp=B({type:c,selectors:[["app-one-time-payment-modal"]],inputs:{period:"period",type:"type"},decls:44,vars:7,consts:[["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"ion-padding",3,"formGroup"],["position","stacked"],["formControlName","type"],["value","expense"],["value","income"],["button","",3,"click"],[1,"icon-preview"],["size","large",3,"name","color"],["formControlName","name","placeholder","e.g., Gift, Bonus","type","text"],["color","danger",4,"ngIf"],["formControlName","amount","type","number","placeholder","0.00","step","0.01"],["formControlName","dueDate","type","date"],[1,"ion-padding-start"],["expand","block",3,"click","disabled"],["color","danger"],[1,"error-text"]],template:function(n,t){if(n&1&&(a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),m(3),i(),a(4,"ion-buttons",0)(5,"ion-button",1),x("click",function(){return t.dismiss()}),_(6,"ion-icon",2),i()()()(),a(7,"ion-content")(8,"form",3)(9,"ion-item")(10,"ion-label",4),m(11,"Type"),i(),a(12,"ion-segment",5)(13,"ion-segment-button",6)(14,"ion-label"),m(15,"Expense"),i()(),a(16,"ion-segment-button",7)(17,"ion-label"),m(18,"Income"),i()()()(),a(19,"ion-item",8),x("click",function(){return t.openIconPicker()}),a(20,"ion-label",4),m(21,"Icon"),i(),a(22,"div",9),_(23,"ion-icon",10),i()(),a(24,"ion-item")(25,"ion-label",4),m(26,"Name *"),i(),_(27,"ion-input",11),i(),b(28,Qe,3,0,"ion-text",12),a(29,"ion-item")(30,"ion-label",4),m(31,"Amount *"),i(),_(32,"ion-input",13),i(),b(33,Xe,3,0,"ion-text",12),a(34,"ion-item")(35,"ion-label",4),m(36,"Date *"),i(),_(37,"ion-input",14),i(),a(38,"ion-note",15),m(39," Past dates will be automatically marked as completed "),i()()(),a(40,"ion-footer")(41,"ion-toolbar")(42,"ion-button",16),x("click",function(){return t.save()}),m(43," Add Payment "),i()()()),n&2){let o,l;r(3),P("Add One-Time ",t.paymentForm.value.type==="income"?"Income":"Expense"),r(5),u("formGroup",t.paymentForm),r(15),u("name",t.paymentForm.value.iconName)("color",t.paymentForm.value.type==="income"?"success":"danger"),r(5),u("ngIf",((o=t.paymentForm.get("name"))==null?null:o.invalid)&&((o=t.paymentForm.get("name"))==null?null:o.touched)),r(5),u("ngIf",((l=t.paymentForm.get("amount"))==null?null:l.invalid)&&((l=t.paymentForm.get("amount"))==null?null:l.touched)),r(9),u("disabled",!t.paymentForm.valid)}},dependencies:[R,z,ve,ye,V,ue,fe,_e,ne,$,H,G,Y,q,W,U,J,Q,Fe,ze,Re,X,Z,ee,K,Se,be],styles:[".icon-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:16px 0}.error-text[_ngcontent-%COMP%]{font-size:12px;padding:4px 16px;margin:0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 8px;--padding-bottom: 8px}"]});let s=c;return s})();var T=(()=>{let c=class c{constructor(){}getCurrentPeriod(e,n=new Date){let t=new Date(n);t.setHours(0,0,0,0);let o=t.getDate(),l;o>=e?l=new Date(t.getFullYear(),t.getMonth(),e):l=new Date(t.getFullYear(),t.getMonth()-1,e),l.setHours(0,0,0,0);let g=new Date(l);return g.setMonth(g.getMonth()+1),g.setDate(g.getDate()-1),g.setHours(23,59,59,999),{periodStart:l,periodEnd:g,displayLabel:this.formatPeriodLabel(l,g)}}getNextPeriod(e){let n=new Date(e.periodStart);n.setMonth(n.getMonth()+1),n.setHours(0,0,0,0);let t=new Date(n);return t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1),t.setHours(23,59,59,999),{periodStart:n,periodEnd:t,displayLabel:this.formatPeriodLabel(n,t)}}getPreviousPeriod(e){let n=new Date(e.periodStart);n.setMonth(n.getMonth()-1),n.setHours(0,0,0,0);let t=new Date(n);return t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1),t.setHours(23,59,59,999),{periodStart:n,periodEnd:t,displayLabel:this.formatPeriodLabel(n,t)}}calculateDueDate(e,n){let{periodStart:t,periodEnd:o}=n,l;t.getMonth()===o.getMonth()?l=new Date(t):e>=t.getDate()?l=new Date(t):l=new Date(o.getFullYear(),o.getMonth(),1);let g=new Date(l.getFullYear(),l.getMonth(),e);return g.setHours(0,0,0,0),g.getMonth()!==l.getMonth()?new Date(l.getFullYear(),l.getMonth()+1,0,0,0,0,0):g}formatPeriodLabel(e,n){let t=e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${t} - ${o}`}getPeriodKey(e){return e.periodStart.toISOString().split("T")[0]}};c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=D({token:c,factory:c.\u0275fac,providedIn:"root"});let s=c;return s})();var Ye=(()=>{let c=class c{constructor(e,n){this.storage=e,this.datePeriodService=n,this.STORAGE_KEY="payment_logs",this.logs$=new L([]),this.storageReady=!1,this.initStorage()}initStorage(){return p(this,null,function*(){yield this.storage.create(),this.storageReady=!0,yield this.loadLogs()})}ensureStorageReady(){return p(this,null,function*(){this.storageReady||(yield this.initStorage())})}getLogs(){return this.logs$.asObservable()}getAll(){return p(this,null,function*(){return yield this.ensureStorageReady(),((yield this.storage.get(this.STORAGE_KEY))||[]).map(n=>this.deserializeLog(n))})}getLogsByPeriod(e){return p(this,null,function*(){let n=yield this.getAll(),t=this.datePeriodService.getPeriodKey(e);return n.filter(o=>this.datePeriodService.getPeriodKey({periodStart:o.periodStart,periodEnd:o.periodEnd,displayLabel:""})===t).sort((o,l)=>o.dueDate.getTime()-l.dueDate.getTime())})}ensureLogsForPeriod(e,n){return p(this,null,function*(){yield this.ensureStorageReady();let t=yield this.getLogsByPeriod(e),o=new Set(t.map(g=>g.recurringPaymentId)),l=n.filter(g=>g.isActive&&!o.has(g.id));if(l.length>0){let g=l.map(y=>this.createLogFromPayment(y,e));yield this.createMultiple(g)}})}createLogFromPayment(e,n){let t=this.datePeriodService.calculateDueDate(e.dayOfMonth,n);return{recurringPaymentId:e.id,name:e.name,amount:e.defaultAmount,iconName:e.iconName,dayOfMonth:e.dayOfMonth,type:e.type,periodStart:n.periodStart,periodEnd:n.periodEnd,dueDate:t,isCompleted:!1}}create(e){return p(this,null,function*(){yield this.ensureStorageReady();let n=M(S({},e),{id:re(),createdAt:new Date}),t=yield this.getAll();return t.push(n),yield this.saveAll(t),n})}createMultiple(e){return p(this,null,function*(){yield this.ensureStorageReady();let n=e.map(o=>M(S({},o),{id:re(),createdAt:new Date})),t=yield this.getAll();return t.push(...n),yield this.saveAll(t),n})}update(e,n){return p(this,null,function*(){yield this.ensureStorageReady();let t=yield this.getAll(),o=t.findIndex(l=>l.id===e);o!==-1&&(t[o]=S(S({},t[o]),n),yield this.saveAll(t))})}updateLogAmount(e,n){return p(this,null,function*(){yield this.update(e,{amount:n})})}markAsCompleted(e){return p(this,null,function*(){yield this.update(e,{isCompleted:!0,completedDate:new Date})})}markAsIncomplete(e){return p(this,null,function*(){yield this.update(e,{isCompleted:!1,completedDate:void 0})})}delete(e){return p(this,null,function*(){yield this.ensureStorageReady();let t=(yield this.getAll()).filter(o=>o.id!==e);yield this.saveAll(t)})}calculateForecast(e,n){let t=n.filter(y=>!y.isCompleted),o=t.filter(y=>y.type==="expense").reduce((y,oe)=>y+oe.amount,0),l=t.filter(y=>y.type==="income").reduce((y,oe)=>y+oe.amount,0),g=e-o+l;return{pendingExpenses:o,pendingIncome:l,forecastedBalance:g}}saveAll(e){return p(this,null,function*(){let n=e.map(t=>this.serializeLog(t));yield this.storage.set(this.STORAGE_KEY,n),yield this.loadLogs()})}loadLogs(){return p(this,null,function*(){let e=yield this.getAll();this.logs$.next(e)})}serializeLog(e){return M(S({},e),{periodStart:e.periodStart.toISOString(),periodEnd:e.periodEnd.toISOString(),dueDate:e.dueDate.toISOString(),completedDate:e.completedDate?.toISOString(),createdAt:e.createdAt.toISOString()})}deserializeLog(e){return M(S({},e),{periodStart:new Date(e.periodStart),periodEnd:new Date(e.periodEnd),dueDate:new Date(e.dueDate),completedDate:e.completedDate?new Date(e.completedDate):void 0,createdAt:new Date(e.createdAt)})}};c.\u0275fac=function(n){return new(n||c)(k(j),k(T))},c.\u0275prov=D({token:c,factory:c.\u0275fac,providedIn:"root"});let s=c;return s})();var qe=(()=>{let c=class c{constructor(e,n){this.storage=e,this.datePeriodService=n,this.STORAGE_KEY="period_balances",this.balances$=new L(new Map),this.storageReady=!1,this.initStorage()}initStorage(){return p(this,null,function*(){yield this.storage.create(),this.storageReady=!0,yield this.loadBalances()})}ensureStorageReady(){return p(this,null,function*(){this.storageReady||(yield this.initStorage())})}getBalances(){return this.balances$.asObservable()}getAll(){return p(this,null,function*(){return yield this.ensureStorageReady(),(yield this.storage.get(this.STORAGE_KEY))||[]})}getBalanceForPeriod(e){return p(this,null,function*(){yield this.ensureStorageReady();let n=this.datePeriodService.getPeriodKey(e);return(yield this.getAll()).find(l=>l.periodKey===n)?.currentAccountBalance||0})}setBalanceForPeriod(e,n){return p(this,null,function*(){yield this.ensureStorageReady();let t=this.datePeriodService.getPeriodKey(e),o=yield this.getAll(),l=o.findIndex(g=>g.periodKey===t);l!==-1?o[l].currentAccountBalance=n:o.push({periodKey:t,currentAccountBalance:n}),yield this.saveAll(o)})}saveAll(e){return p(this,null,function*(){yield this.storage.set(this.STORAGE_KEY,e),yield this.loadBalances()})}loadBalances(){return p(this,null,function*(){let e=yield this.getAll(),n=new Map;e.forEach(t=>n.set(t.periodKey,t.currentAccountBalance)),this.balances$.next(n)})}};c.\u0275fac=function(n){return new(n||c)(k(j),k(T))},c.\u0275prov=D({token:c,factory:c.\u0275fac,providedIn:"root"});let s=c;return s})();function nt(s,c){s&1&&(a(0,"ion-badge",32),m(1),h(2,"translate"),i()),s&2&&(r(),v(f(2,1,"tracker.now")))}function it(s,c){if(s&1){let d=A();a(0,"ion-item"),_(1,"ion-icon",35),a(2,"ion-label")(3,"h2"),m(4),i(),a(5,"p"),m(6),h(7,"date"),i()(),a(8,"ion-badge",36),x("click",function(){let n=E(d).$implicit,t=C(2);return O(t.editAmount(n))}),m(9),h(10,"appCurrency"),i(),a(11,"ion-checkbox",37),x("ionChange",function(){let n=E(d).$implicit,t=C(2);return O(t.toggleCompleted(n))}),i()()}if(s&2){let d=c.$implicit;ae("completed-item",d.isCompleted),r(),u("name",d.iconName)("color",d.type==="income"?"success":"danger"),r(3),v(d.name),r(2),P("Due: ",N(7,9,d.dueDate,"MMM d")),r(2),u("color",d.type==="income"?"success":"danger"),r(),P(" ",f(10,12,d.amount)," "),r(2),u("checked",d.isCompleted)}}function ot(s,c){if(s&1&&(a(0,"ion-list")(1,"ion-list-header")(2,"ion-label",33),m(3),h(4,"translate"),i()(),b(5,it,12,14,"ion-item",34),i()),s&2){let d=C();r(3),F("",f(4,3,"tracker.due")," (",d.groupedLogs.overdue.length,")"),r(2),u("ngForOf",d.groupedLogs.overdue)}}function at(s,c){if(s&1){let d=A();a(0,"ion-item"),_(1,"ion-icon",35),a(2,"ion-label")(3,"h2"),m(4),i(),a(5,"p"),m(6),h(7,"date"),i()(),a(8,"ion-badge",36),x("click",function(){let n=E(d).$implicit,t=C(2);return O(t.editAmount(n))}),m(9),h(10,"appCurrency"),i(),a(11,"ion-checkbox",37),x("ionChange",function(){let n=E(d).$implicit,t=C(2);return O(t.toggleCompleted(n))}),i()()}if(s&2){let d=c.$implicit;ae("completed-item",d.isCompleted),r(),u("name",d.iconName)("color",d.type==="income"?"success":"danger"),r(3),v(d.name),r(2),P("Due: ",N(7,9,d.dueDate,"MMM d")),r(2),u("color",d.type==="income"?"success":"danger"),r(),P(" ",f(10,12,d.amount)," "),r(2),u("checked",d.isCompleted)}}function rt(s,c){if(s&1&&(a(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),m(3),h(4,"translate"),i()(),b(5,at,12,14,"ion-item",34),i()),s&2){let d=C();r(3),F("",f(4,3,"tracker.pending")," (",d.groupedLogs.upcoming.length,")"),r(2),u("ngForOf",d.groupedLogs.upcoming)}}function ct(s,c){if(s&1){let d=A();a(0,"ion-item",40),_(1,"ion-icon",35),a(2,"ion-label")(3,"h2"),m(4),i(),a(5,"p"),m(6),h(7,"date"),i()(),a(8,"ion-badge",36),x("click",function(){let n=E(d).$implicit,t=C(2);return O(t.editAmount(n))}),m(9),h(10,"appCurrency"),i(),a(11,"ion-checkbox",37),x("ionChange",function(){let n=E(d).$implicit,t=C(2);return O(t.toggleCompleted(n))}),i()()}if(s&2){let d=c.$implicit;r(),u("name",d.iconName)("color",d.type==="income"?"success":"danger"),r(3),v(d.name),r(2),P("Completed: ",N(7,7,d.completedDate,"MMM d")),r(2),u("color",d.type==="income"?"success":"danger"),r(),P(" ",f(10,10,d.amount)," "),r(2),u("checked",d.isCompleted)}}function st(s,c){if(s&1&&(a(0,"ion-list")(1,"ion-list-header")(2,"ion-label",38),m(3),h(4,"translate"),i()(),b(5,ct,12,12,"ion-item",39),i()),s&2){let d=C();r(3),F("",f(4,3,"tracker.completed")," (",d.groupedLogs.completed.length,")"),r(2),u("ngForOf",d.groupedLogs.completed)}}function lt(s,c){s&1&&(a(0,"div",41),_(1,"ion-icon",42),a(2,"p"),m(3,"No payments for this period"),i(),a(4,"ion-text",11)(5,"p"),m(6,"Add recurring payments to track them here"),i()()())}var Ot=(()=>{let c=class c{constructor(e,n,t,o,l,g,y){this.paymentLogService=e,this.recurringPaymentService=n,this.datePeriodService=t,this.balanceService=o,this.settingsService=l,this.alertCtrl=g,this.modalCtrl=y,this.currentPeriod={periodStart:new Date,periodEnd:new Date,displayLabel:""},this.allLogs=[],this.groupedLogs={overdue:[],upcoming:[],completed:[]},this.currentBalance=0,this.currencySymbol="$",this.forecast={pendingExpenses:0,pendingIncome:0,forecastedBalance:0}}ngOnInit(){return p(this,null,function*(){yield this.initializePage()})}ionViewWillEnter(){return p(this,null,function*(){yield this.initializePage()})}initializePage(){return p(this,null,function*(){yield this.loadCurrentPeriod(),yield this.loadCurrencySymbol(),yield this.ensureLogsExist(),yield this.loadPaymentLogs(),yield this.loadBalance(),this.calculateForecast()})}loadCurrencySymbol(){return p(this,null,function*(){let e=yield this.settingsService.get();this.currencySymbol=e.currencySymbol})}loadCurrentPeriod(){return p(this,null,function*(){let e=yield this.settingsService.getMonthStartDay();this.currentPeriod=this.datePeriodService.getCurrentPeriod(e)})}ensureLogsExist(){return p(this,null,function*(){let e=yield this.recurringPaymentService.getAllSortedByDay();yield this.paymentLogService.ensureLogsForPeriod(this.currentPeriod,e)})}loadPaymentLogs(){return p(this,null,function*(){this.allLogs=yield this.paymentLogService.getLogsByPeriod(this.currentPeriod),this.organizePaymentLogs()})}loadBalance(){return p(this,null,function*(){this.currentBalance=yield this.balanceService.getBalanceForPeriod(this.currentPeriod)})}organizePaymentLogs(){let e=new Date;e.setHours(0,0,0,0);let n=[],t=[],o=[];this.allLogs.forEach(g=>{g.isCompleted?o.push(g):g.dueDate<e?n.push(g):t.push(g)});let l=(g,y)=>g.dueDate.getTime()-y.dueDate.getTime();n.sort(l),t.sort(l),o.sort((g,y)=>(y.completedDate?.getTime()||0)-(g.completedDate?.getTime()||0)),this.groupedLogs={overdue:n,upcoming:t,completed:o}}calculateForecast(){this.forecast=this.paymentLogService.calculateForecast(this.currentBalance,this.allLogs)}previousMonth(){return p(this,null,function*(){this.currentPeriod=this.datePeriodService.getPreviousPeriod(this.currentPeriod),yield this.ensureLogsExist(),yield this.loadPaymentLogs(),yield this.loadBalance(),this.calculateForecast()})}nextMonth(){return p(this,null,function*(){this.currentPeriod=this.datePeriodService.getNextPeriod(this.currentPeriod),yield this.ensureLogsExist(),yield this.loadPaymentLogs(),yield this.loadBalance(),this.calculateForecast()})}toggleCompleted(e){return p(this,null,function*(){e.isCompleted?yield this.paymentLogService.markAsIncomplete(e.id):yield this.paymentLogService.markAsCompleted(e.id),yield this.loadPaymentLogs(),this.calculateForecast()})}editAmount(e){return p(this,null,function*(){yield(yield this.alertCtrl.create({header:"Edit Amount",subHeader:e.name,inputs:[{name:"amount",type:"number",placeholder:"Amount",value:e.amount,min:.01}],buttons:[{text:"Cancel",role:"cancel"},{text:"Save",handler:t=>p(this,null,function*(){t.amount&&t.amount>0&&(yield this.paymentLogService.updateLogAmount(e.id,parseFloat(t.amount)),yield this.loadPaymentLogs(),this.calculateForecast())})}]})).present()})}onBalanceChange(){return p(this,null,function*(){yield this.balanceService.setBalanceForPeriod(this.currentPeriod,this.currentBalance),this.calculateForecast()})}getForecastColor(){return this.forecast.forecastedBalance>=0?"success":this.forecast.forecastedBalance>=-100?"warning":"danger"}isCurrentPeriod(){let e=new Date;return e>=this.currentPeriod.periodStart&&e<=this.currentPeriod.periodEnd}openAddOneTimePayment(){return p(this,null,function*(){let e=yield this.modalCtrl.create({component:Ge,componentProps:{period:this.currentPeriod,type:"expense"}});yield e.present();let{data:n}=yield e.onWillDismiss();n?.payment&&(yield this.createOneTimePayment(n.payment))})}createOneTimePayment(e){return p(this,null,function*(){let n={recurringPaymentId:void 0,name:e.name,amount:e.amount,dueDate:e.dueDate,isCompleted:e.isCompleted,completedDate:e.completedDate,iconName:e.iconName,dayOfMonth:e.dueDate.getDate(),type:e.type,periodStart:this.currentPeriod.periodStart,periodEnd:this.currentPeriod.periodEnd};yield this.paymentLogService.create(n),yield this.loadPaymentLogs(),this.calculateForecast()})}};c.\u0275fac=function(n){return new(n||c)(w(Ye),w(He),w(T),w(qe),w(Ke),w(Ve),w(te))},c.\u0275cmp=B({type:c,selectors:[["app-payment-tracker"]],decls:72,vars:38,consts:[[3,"translucent"],["slot","start"],[3,"click"],["name","chevron-back","slot","icon-only"],["color","primary","style","margin-left: 8px; font-size: 10px; vertical-align: middle;",4,"ngIf"],["slot","end"],["name","chevron-forward","slot","icon-only"],[1,"ion-padding-bottom",3,"fullscreen"],[1,"summary-card"],["size","6"],[1,"summary-item"],["color","medium"],[1,"income-text"],[1,"expense-text"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"forecast-footer"],[1,"footer-card"],[1,"ion-align-items-center"],[1,"balance-input-wrapper"],[1,"balance-label"],[1,"balance-input-container"],[1,"currency-prefix"],["type","number","placeholder","0.00",1,"balance-input",3,"ngModelChange","ionChange","ngModel"],[1,"forecast-display"],[1,"forecast-label"],[1,"forecast-amount",3,"ngClass"],[1,"forecast-details"],["name","arrow-down","color","danger"],["name","arrow-up","color","success"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add"],["color","primary",2,"margin-left","8px","font-size","10px","vertical-align","middle"],["color","danger"],[3,"completed-item",4,"ngFor","ngForOf"],["slot","start",3,"name","color"],["slot","end",1,"clickable-badge",3,"click","color"],["slot","end",3,"ionChange","checked"],["color","success"],["class","completed-item",4,"ngFor","ngForOf"],[1,"completed-item"],[1,"empty-state"],["name","calendar-outline","color","medium"]],template:function(n,t){n&1&&(a(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),x("click",function(){return t.previousMonth()}),_(4,"ion-icon",3),i()(),a(5,"ion-title"),m(6),b(7,nt,3,3,"ion-badge",4),i(),a(8,"ion-buttons",5)(9,"ion-button",2),x("click",function(){return t.nextMonth()}),_(10,"ion-icon",6),i()()()(),a(11,"ion-content",7)(12,"ion-card",8)(13,"ion-card-content")(14,"ion-grid")(15,"ion-row")(16,"ion-col",9)(17,"div",10)(18,"ion-text",11)(19,"p"),m(20),h(21,"translate"),i()(),a(22,"h2",12),m(23),h(24,"appCurrency"),i()()(),a(25,"ion-col",9)(26,"div",10)(27,"ion-text",11)(28,"p"),m(29),h(30,"translate"),i()(),a(31,"h2",13),m(32),h(33,"appCurrency"),i()()()()()()(),b(34,ot,6,5,"ion-list",14)(35,rt,6,5,"ion-list",14)(36,st,6,5,"ion-list",14)(37,lt,7,0,"div",15),i(),a(38,"ion-footer",16)(39,"ion-card",17)(40,"ion-card-content")(41,"ion-grid")(42,"ion-row",18)(43,"ion-col",9)(44,"div",19)(45,"ion-label",20),m(46),h(47,"translate"),i(),a(48,"div",21)(49,"span",22),m(50),i(),a(51,"ion-input",23),de("ngModelChange",function(l){return le(t.currentBalance,l)||(t.currentBalance=l),l}),x("ionChange",function(){return t.onBalanceChange()}),i()()()(),a(52,"ion-col",9)(53,"div",24)(54,"ion-text",11)(55,"p",25),m(56),h(57,"translate"),i()(),a(58,"h2",26),m(59),h(60,"appCurrency"),i(),a(61,"ion-text",11)(62,"p",27),_(63,"ion-icon",28),m(64),h(65,"appCurrency"),_(66,"ion-icon",29),m(67),h(68,"appCurrency"),i()()()()()()()()(),a(69,"ion-fab",30)(70,"ion-fab-button",2),x("click",function(){return t.openAddOneTimePayment()}),_(71,"ion-icon",31),i()()),n&2&&(u("translucent",!0),r(6),P(" ",t.currentPeriod.displayLabel," "),r(),u("ngIf",t.isCurrentPeriod()),r(4),u("fullscreen",!0),r(9),v(f(21,20,"tracker.pendingIncome")),r(3),v(f(24,22,t.forecast.pendingIncome)),r(6),v(f(30,24,"tracker.pendingExpenses")),r(3),v(f(33,26,t.forecast.pendingExpenses)),r(2),u("ngIf",t.groupedLogs.overdue.length>0),r(),u("ngIf",t.groupedLogs.upcoming.length>0),r(),u("ngIf",t.groupedLogs.completed.length>0),r(),u("ngIf",t.allLogs.length===0),r(9),v(f(47,28,"tracker.currentBalance")),r(4),v(t.currencySymbol),r(),se("ngModel",t.currentBalance),r(5),v(f(57,30,"tracker.forecastedBalance")),r(2),u("ngClass",t.getForecastColor()+"-text"),r(),P(" ",f(60,32,t.forecast.forecastedBalance)," "),r(5),P(" ",f(65,34,t.forecast.pendingExpenses)," "),r(3),P(" ",f(68,36,t.forecast.pendingIncome)," "))},dependencies:[ne,Ie,$,H,Me,Ee,Oe,De,G,ke,Te,Y,Le,q,W,U,J,Q,Be,Ae,Ne,X,Z,ee,Ce,K,R,pe,me,z,Pe,V,he,ge,$e,we],styles:[".summary-card[_ngcontent-%COMP%]{margin:16px}.summary-item[_ngcontent-%COMP%]{text-align:center}.summary-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:12px;text-transform:uppercase;font-weight:500}.summary-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.income-text[_ngcontent-%COMP%]{color:var(--ion-color-success)}.expense-text[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.clickable-badge[_ngcontent-%COMP%]{cursor:pointer}.clickable-badge[_ngcontent-%COMP%]:hover{opacity:.8}.completed-item[_ngcontent-%COMP%]{opacity:.5}.completed-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .completed-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:line-through}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:8px 0}.empty-state[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:4px 0}.forecast-footer[_ngcontent-%COMP%]{box-shadow:0 -2px 10px #0000001a}.footer-card[_ngcontent-%COMP%]{margin:0;box-shadow:none}.balance-input-wrapper[_ngcontent-%COMP%]   .balance-label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:500;text-transform:uppercase;color:var(--ion-color-medium);margin-bottom:8px}.balance-input-wrapper[_ngcontent-%COMP%]   .balance-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--ion-color-light);border-radius:12px;padding:12px 16px;border:2px solid transparent;transition:all .3s ease;box-shadow:0 2px 8px #00000014}.balance-input-wrapper[_ngcontent-%COMP%]   .balance-input-container[_ngcontent-%COMP%]:focus-within{border-color:var(--ion-color-primary);box-shadow:0 4px 12px rgba(var(--ion-color-primary-rgb),.2);background:var(--ion-background-color)}.balance-input-wrapper[_ngcontent-%COMP%]   .balance-input-container[_ngcontent-%COMP%]   .currency-prefix[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--ion-color-primary);margin-right:8px}.balance-input-wrapper[_ngcontent-%COMP%]   .balance-input-container[_ngcontent-%COMP%]   .balance-input[_ngcontent-%COMP%]{flex:1;font-size:20px;font-weight:600;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--background: transparent}.balance-input-wrapper[_ngcontent-%COMP%]   .balance-input-container[_ngcontent-%COMP%]   .balance-input[_ngcontent-%COMP%]::part(native){padding:0}.forecast-display[_ngcontent-%COMP%]{text-align:center}.forecast-display[_ngcontent-%COMP%]   .forecast-label[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;text-transform:uppercase;font-weight:500}.forecast-display[_ngcontent-%COMP%]   .forecast-amount[_ngcontent-%COMP%]{margin:4px 0;font-size:24px;font-weight:700}.forecast-display[_ngcontent-%COMP%]   .forecast-details[_ngcontent-%COMP%]{margin:4px 0 0;font-size:11px;display:flex;align-items:center;justify-content:center;gap:8px}.forecast-display[_ngcontent-%COMP%]   .forecast-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;margin-right:2px}.success-text[_ngcontent-%COMP%]{color:var(--ion-color-success)}.warning-text[_ngcontent-%COMP%]{color:var(--ion-color-warning)}.danger-text[_ngcontent-%COMP%]{color:var(--ion-color-danger)}ion-fab[_ngcontent-%COMP%]{margin-bottom:200px}"]});let s=c;return s})();export{Ot as PaymentTrackerPage};
