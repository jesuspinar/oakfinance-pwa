import{B as tt,C as et,F as it,G as nt,H as ot,L as rt,M as at,d as W,f as X,g as Y,k as H,l as q,p as J,q as Q,r as Z}from"./chunk-ZNNOVYTL.js";import{a as K,b as st}from"./chunk-CGQ65MYN.js";import{$ as x,Aa as L,C as m,Da as j,E as g,G as N,J as U,L as I,Q as f,R as d,S as c,T as w,Z as k,_ as y,c as O,ia as _,jb as B,lb as $,ma as D,n as E,na as V,oa as F,q as T,sb as G,u as P,v as R,za as z}from"./chunk-UOTJ5SCR.js";import{a as u,b as h,h as s}from"./chunk-B7O3QC5Z.js";var It=(()=>{let e=class e{constructor(t){this.settingsService=t,this.symbol="$",this.settingsService.getSettings().subscribe(n=>{this.symbol=n.currencySymbol})}transform(t){let o=(typeof t=="string"?parseFloat(t):t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",");return`${this.symbol}${o}`}};e.\u0275fac=function(n){return new(n||e)(g(st,16))},e.\u0275pipe=U({name:"appCurrency",type:e,pure:!1});let i=e;return i})();var r=[];for(let i=0;i<256;++i)r.push((i+256).toString(16).slice(1));function ct(i,e=0){return(r[i[e+0]]+r[i[e+1]]+r[i[e+2]]+r[i[e+3]]+"-"+r[i[e+4]]+r[i[e+5]]+"-"+r[i[e+6]]+r[i[e+7]]+"-"+r[i[e+8]]+r[i[e+9]]+"-"+r[i[e+10]]+r[i[e+11]]+r[i[e+12]]+r[i[e+13]]+r[i[e+14]]+r[i[e+15]]).toLowerCase()}var S,ut=new Uint8Array(16);function v(){if(!S){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");S=crypto.getRandomValues.bind(crypto)}return S(ut)}var mt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),b={randomUUID:mt};function pt(i,e,a){i=i||{};let t=i.random??i.rng?.()??v();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){if(a=a||0,a<0||a+16>e.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[a+n]=t[n];return e}return ct(t)}function ft(i,e,a){return b.randomUUID&&!e&&!i?b.randomUUID():pt(i,e,a)}var C=ft;var Rt=(()=>{let e=class e{constructor(t){this.storage=t,this.STORAGE_KEY="recurring_payments",this.payments$=new O([]),this.storageReady=!1,this.initStorage()}initStorage(){return s(this,null,function*(){yield this.storage.create(),this.storageReady=!0,yield this.loadPayments()})}ensureStorageReady(){return s(this,null,function*(){this.storageReady||(yield this.initStorage())})}getPayments(){return this.payments$.asObservable()}getAll(){return s(this,null,function*(){return yield this.ensureStorageReady(),((yield this.storage.get(this.STORAGE_KEY))||[]).map(n=>this.deserializePayment(n))})}getByType(t){return s(this,null,function*(){return(yield this.getAll()).filter(o=>o.isActive&&o.type===t).sort((o,l)=>o.dayOfMonth-l.dayOfMonth)})}getAllSortedByDay(){return s(this,null,function*(){return(yield this.getAll()).filter(n=>n.isActive).sort((n,o)=>n.dayOfMonth-o.dayOfMonth)})}getById(t){return s(this,null,function*(){return(yield this.getAll()).find(o=>o.id===t)})}create(t){return s(this,null,function*(){yield this.ensureStorageReady();let n=h(u({},t),{id:C(),createdAt:new Date,isActive:!0}),o=yield this.getAll();return o.push(n),yield this.saveAll(o),n})}update(t,n){return s(this,null,function*(){yield this.ensureStorageReady();let o=yield this.getAll(),l=o.findIndex(p=>p.id===t);l!==-1&&(o[l]=u(u({},o[l]),n),yield this.saveAll(o))})}delete(t){return s(this,null,function*(){yield this.update(t,{isActive:!1})})}permanentDelete(t){return s(this,null,function*(){yield this.ensureStorageReady();let o=(yield this.getAll()).filter(l=>l.id!==t);yield this.saveAll(o)})}saveAll(t){return s(this,null,function*(){let n=t.map(o=>this.serializePayment(o));yield this.storage.set(this.STORAGE_KEY,n),yield this.loadPayments()})}loadPayments(){return s(this,null,function*(){let t=yield this.getAll();this.payments$.next(t)})}serializePayment(t){return h(u({},t),{createdAt:t.createdAt.toISOString()})}deserializePayment(t){return h(u({},t),{createdAt:new Date(t.createdAt)})}};e.\u0275fac=function(n){return new(n||e)(T(K))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var M=["cash-outline","cash","wallet-outline","wallet","card-outline","card","briefcase-outline","briefcase","trending-up-outline","trending-up","gift-outline","gift","business-outline","business"],A=["home-outline","home","water-outline","water","flash-outline","flash","wifi-outline","wifi","phone-portrait-outline","phone-portrait","car-outline","car","restaurant-outline","restaurant","cart-outline","cart","fitness-outline","fitness","medical-outline","medical","school-outline","school","film-outline","film","musical-notes-outline","musical-notes","game-controller-outline","game-controller","airplane-outline","airplane","train-outline","train","bus-outline","bus","bicycle-outline","bicycle","newspaper-outline","newspaper","tv-outline","tv","paw-outline","paw","leaf-outline","leaf","shield-outline","shield","construct-outline","construct","shirt-outline","shirt","bed-outline","bed","cafe-outline","cafe"],dt=[...M,...A].filter((i,e,a)=>a.indexOf(i)===e);function ht(i,e){if(i&1){let a=k();d(0,"ion-col",6)(1,"ion-button",7),y("click",function(){let n=P(a).$implicit,o=x();return R(o.selectIcon(n))}),w(2,"ion-icon",8),c()()}if(i&2){let a=e.$implicit,t=x();m(),f("color",t.selectedIcon===a?"primary":"medium"),m(),f("name",a)}}function gt(i,e){i&1&&(d(0,"div",9)(1,"ion-text",10)(2,"p"),_(3,"No icons found"),c()()())}var $t=(()=>{let e=class e{constructor(t){this.modalCtrl=t,this.allIcons=[],this.filteredIcons=[],this.searchTerm=""}ngOnInit(){this.type==="income"?this.allIcons=M:this.type==="expense"?this.allIcons=A:this.allIcons=dt,this.filteredIcons=[...this.allIcons]}filterIcons(){if(!this.searchTerm.trim()){this.filteredIcons=[...this.allIcons];return}let t=this.searchTerm.toLowerCase();this.filteredIcons=this.allIcons.filter(n=>n.toLowerCase().includes(t))}selectIcon(t){this.modalCtrl.dismiss({icon:t})}dismiss(){this.modalCtrl.dismiss()}};e.\u0275fac=function(n){return new(n||e)(g(rt))},e.\u0275cmp=N({type:e,selectors:[["app-icon-picker-modal"]],inputs:{selectedIcon:"selectedIcon",type:"type"},decls:14,vars:3,consts:[["slot","end"],[3,"click"],["name","close","slot","icon-only"],["placeholder","Search icons...","debounce","300",3,"ngModelChange","ionInput","ngModel"],["size","3","class","ion-text-center",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["size","3",1,"ion-text-center"],["fill","clear",1,"icon-button",3,"click","color"],["size","large",3,"name"],[1,"no-results"],["color","medium"]],template:function(n,o){n&1&&(d(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),_(3,"Select Icon"),c(),d(4,"ion-buttons",0)(5,"ion-button",1),y("click",function(){return o.dismiss()}),w(6,"ion-icon",2),c()()(),d(7,"ion-toolbar")(8,"ion-searchbar",3),F("ngModelChange",function(p){return V(o.searchTerm,p)||(o.searchTerm=p),p}),y("ionInput",function(){return o.filterIcons()}),c()()(),d(9,"ion-content")(10,"ion-grid")(11,"ion-row"),I(12,ht,3,2,"ion-col",4),c()(),I(13,gt,4,0,"div",5),c()),n&2&&(m(8),D("ngModel",o.searchTerm),m(4),f("ngForOf",o.filteredIcons),m(),f("ngIf",o.filteredIcons.length===0))},dependencies:[j,z,L,G,B,$,at,X,Y,H,q,J,Q,Z,tt,et,it,nt,ot,W],styles:["ion-grid[_ngcontent-%COMP%]{padding:8px}ion-col[_ngcontent-%COMP%]{padding:4px}.icon-button[_ngcontent-%COMP%]{height:60px;width:60px;margin:0}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}"]});let i=e;return i})();export{$t as a,It as b,C as c,Rt as d};
