import{a as Me,b as be,d as we}from"./chunk-73TVQXIM.js";import{D as j,E as L,F as W,G as q,H as z,I as Ce,J as Se,K as Ee,L as $,M as G,b as se,c as N,d as ce,e as de,f as ue,g as _e,l as B,m as ye,n as ge,o as fe,q as A,r as R,s as xe,t as V,u as ve,v as Ie,w as he,x as D,y as Pe}from"./chunk-ZNNOVYTL.js";import{a as pe}from"./chunk-6FHDB4KP.js";import"./chunk-UQ5LYNUI.js";import"./chunk-QUJFQN2Y.js";import"./chunk-FWPKUFQQ.js";import"./chunk-TYL2GP6X.js";import"./chunk-SLD6GQLM.js";import"./chunk-FSCYZGDR.js";import"./chunk-N456CQOR.js";import"./chunk-6W3T3SO6.js";import"./chunk-QNCTVU3D.js";import"./chunk-ZXKGFOYV.js";import"./chunk-DRHJ5NHA.js";import"./chunk-U2SAPCD3.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-2JBNIPKT.js";import"./chunk-CKP3SGE2.js";import"./chunk-PKOVH7B7.js";import"./chunk-CGQ65MYN.js";import{$ as h,Aa as T,C as o,Da as O,E as P,G as F,L as x,Q as s,R as e,S as t,T as c,Z as H,_,ga as U,ia as m,ib as I,ja as u,jb as k,ka as E,kb as te,la as Q,lb as ne,ma as X,mb as ie,na as Y,nb as oe,oa as Z,ob as ae,qa as M,ra as d,rb as le,sa as v,sb as me,ta as b,tb as re,u as C,ua as J,v as S,za as ee}from"./chunk-UOTJ5SCR.js";import"./chunk-34LRFQGT.js";import"./chunk-VYBL45FS.js";import"./chunk-D2O4WAW4.js";import"./chunk-N5NF6UWQ.js";import"./chunk-DNTR6X5U.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{h as f}from"./chunk-B7O3QC5Z.js";function Ae(n,r){n&1&&(e(0,"ion-text",16)(1,"p",17),m(2,"Name is required"),t()())}function Re(n,r){n&1&&(e(0,"ion-text",16)(1,"p",17),m(2,"Amount must be greater than 0"),t()())}function Ve(n,r){n&1&&(e(0,"ion-text",16)(1,"p",17),m(2,"Day must be between 1 and 31"),t()())}var K=(()=>{let r=class r{constructor(l,a){this.fb=l,this.modalCtrl=a,this.type="expense",this.isEditMode=!1}ngOnInit(){this.isEditMode=!!this.payment,this.paymentForm=this.fb.group({name:[this.payment?.name||"",[I.required,I.minLength(1)]],defaultAmount:[this.payment?.defaultAmount||0,[I.required,I.min(.01)]],dayOfMonth:[this.payment?.dayOfMonth||1,[I.required,I.min(1),I.max(31)]],iconName:[this.payment?.iconName||"cash-outline",I.required],type:[this.payment?.type||this.type,I.required]})}openIconPicker(){return f(this,null,function*(){let l=yield this.modalCtrl.create({component:Me,componentProps:{selectedIcon:this.paymentForm.value.iconName,type:this.paymentForm.value.type}});yield l.present();let{data:a}=yield l.onWillDismiss();a?.icon&&this.paymentForm.patchValue({iconName:a.icon})})}save(){this.paymentForm.valid&&this.modalCtrl.dismiss({payment:this.paymentForm.value,isEdit:this.isEditMode})}dismiss(){this.modalCtrl.dismiss()}};r.\u0275fac=function(a){return new(a||r)(P(le),P($))},r.\u0275cmp=F({type:r,selectors:[["app-payment-form-modal"]],inputs:{payment:"payment",type:"type"},decls:43,vars:10,consts:[["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"ion-padding",3,"formGroup"],["position","stacked"],["formControlName","type"],["value","expense"],["value","income"],["button","",3,"click"],[1,"icon-preview"],["size","large",3,"name","color"],["formControlName","name","placeholder","e.g., Rent, Salary","type","text"],["color","danger",4,"ngIf"],["formControlName","defaultAmount","type","number","placeholder","0.00","step","0.01"],["formControlName","dayOfMonth","type","number","min","1","max","31"],["expand","block",3,"click","disabled"],["color","danger"],[1,"error-text"]],template:function(a,i){if(a&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),m(3),t(),e(4,"ion-buttons",0)(5,"ion-button",1),_("click",function(){return i.dismiss()}),c(6,"ion-icon",2),t()()()(),e(7,"ion-content")(8,"form",3)(9,"ion-item")(10,"ion-label",4),m(11,"Type"),t(),e(12,"ion-segment",5)(13,"ion-segment-button",6)(14,"ion-label"),m(15,"Expense"),t()(),e(16,"ion-segment-button",7)(17,"ion-label"),m(18,"Income"),t()()()(),e(19,"ion-item",8),_("click",function(){return i.openIconPicker()}),e(20,"ion-label",4),m(21,"Icon"),t(),e(22,"div",9),c(23,"ion-icon",10),t()(),e(24,"ion-item")(25,"ion-label",4),m(26,"Name *"),t(),c(27,"ion-input",11),t(),x(28,Ae,3,0,"ion-text",12),e(29,"ion-item")(30,"ion-label",4),m(31,"Default Amount *"),t(),c(32,"ion-input",13),t(),x(33,Re,3,0,"ion-text",12),e(34,"ion-item")(35,"ion-label",4),m(36,"Day of Month (1-31) *"),t(),c(37,"ion-input",14),t(),x(38,Ve,3,0,"ion-text",12),t()(),e(39,"ion-footer")(40,"ion-toolbar")(41,"ion-button",15),_("click",function(){return i.save()}),m(42),t()()()),a&2){let y,g,w;o(3),Q("",i.isEditMode?"Edit":"Add"," ",i.paymentForm.value.type==="income"?"Income":"Expense"),o(5),s("formGroup",i.paymentForm),o(15),s("name",i.paymentForm.value.iconName)("color",i.paymentForm.value.type==="income"?"success":"danger"),o(5),s("ngIf",((y=i.paymentForm.get("name"))==null?null:y.invalid)&&((y=i.paymentForm.get("name"))==null?null:y.touched)),o(5),s("ngIf",((g=i.paymentForm.get("defaultAmount"))==null?null:g.invalid)&&((g=i.paymentForm.get("defaultAmount"))==null?null:g.touched)),o(5),s("ngIf",((w=i.paymentForm.get("dayOfMonth"))==null?null:w.invalid)&&((w=i.paymentForm.get("dayOfMonth"))==null?null:w.touched)),o(3),s("disabled",!i.paymentForm.valid),o(),E(" ",i.isEditMode?"Update":"Add"," Payment ")}},dependencies:[O,T,re,ie,k,te,oe,ae,G,ue,_e,B,fe,A,R,xe,V,D,j,L,W,q,z,se,N,ce,Se,Ce],styles:[".icon-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:16px 0}.error-text[_ngcontent-%COMP%]{font-size:12px;padding:4px 16px;margin:0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 8px;--padding-bottom: 8px}"]});let n=r;return n})();var Fe=n=>({day:n}),Te=n=>({type:n});function De(n,r){if(n&1){let p=H();e(0,"ion-item-sliding")(1,"ion-item"),c(2,"ion-icon",13),e(3,"ion-label")(4,"h2"),m(5),t(),e(6,"p"),m(7),d(8,"translate"),t()(),e(9,"ion-badge",14),m(10),d(11,"appCurrency"),t()(),e(12,"ion-item-options",15)(13,"ion-item-option",16),_("click",function(){let a=C(p).$implicit,i=h(3);return S(i.openEditModal(a))}),c(14,"ion-icon",17),t(),e(15,"ion-item-option",18),_("click",function(){let a=C(p).$implicit,i=h(3);return S(i.confirmDelete(a))}),c(16,"ion-icon",19),t()()()}if(n&2){let p=r.$implicit;o(2),s("name",p.iconName),o(3),u(p.name),o(2),u(b(8,4,"payments.dayOfMonth",M(9,Fe,p.dayOfMonth))),o(3),E(" ",v(11,7,p.defaultAmount)," ")}}function je(n,r){if(n&1&&(e(0,"ion-list"),x(1,De,17,11,"ion-item-sliding",12),t()),n&2){let p=h(2);o(),s("ngForOf",p.expensePayments)}}function Le(n,r){n&1&&(e(0,"div",20),c(1,"ion-icon",21),e(2,"p"),m(3),d(4,"translate"),t(),e(5,"ion-text",22)(6,"p"),m(7),d(8,"translate"),d(9,"translate"),t()()()),n&2&&(o(3),u(v(4,2,"payments.noExpenses")),o(4),u(b(9,6,"payments.addFirst",M(9,Te,v(8,4,"payments.expenses").toLowerCase()))))}function We(n,r){if(n&1&&(e(0,"div"),x(1,je,2,1,"ion-list",11)(2,Le,10,11,"ng-template",null,0,J),t()),n&2){let p=U(3),l=h();o(),s("ngIf",l.expensePayments.length>0)("ngIfElse",p)}}function qe(n,r){if(n&1){let p=H();e(0,"ion-item-sliding")(1,"ion-item"),c(2,"ion-icon",23),e(3,"ion-label")(4,"h2"),m(5),t(),e(6,"p"),m(7),d(8,"translate"),t()(),e(9,"ion-badge",24),m(10),d(11,"appCurrency"),t()(),e(12,"ion-item-options",15)(13,"ion-item-option",16),_("click",function(){let a=C(p).$implicit,i=h(3);return S(i.openEditModal(a))}),c(14,"ion-icon",17),t(),e(15,"ion-item-option",18),_("click",function(){let a=C(p).$implicit,i=h(3);return S(i.confirmDelete(a))}),c(16,"ion-icon",19),t()()()}if(n&2){let p=r.$implicit;o(2),s("name",p.iconName),o(3),u(p.name),o(2),u(b(8,4,"payments.dayOfMonth",M(9,Fe,p.dayOfMonth))),o(3),E(" ",v(11,7,p.defaultAmount)," ")}}function ze(n,r){if(n&1&&(e(0,"ion-list"),x(1,qe,17,11,"ion-item-sliding",12),t()),n&2){let p=h(2);o(),s("ngForOf",p.incomePayments)}}function $e(n,r){n&1&&(e(0,"div",20),c(1,"ion-icon",25),e(2,"p"),m(3),d(4,"translate"),t(),e(5,"ion-text",22)(6,"p"),m(7),d(8,"translate"),d(9,"translate"),t()()()),n&2&&(o(3),u(v(4,2,"payments.noIncome")),o(4),u(b(9,6,"payments.addFirst",M(9,Te,v(8,4,"payments.income").toLowerCase()))))}function Ge(n,r){if(n&1&&(e(0,"div"),x(1,ze,2,1,"ion-list",11)(2,$e,10,11,"ng-template",null,1,J),t()),n&2){let p=U(3),l=h();o(),s("ngIf",l.incomePayments.length>0)("ngIfElse",p)}}var at=(()=>{let r=class r{constructor(l,a,i){this.paymentService=l,this.modalCtrl=a,this.alertCtrl=i,this.incomePayments=[],this.expensePayments=[],this.selectedSegment="expense"}ngOnInit(){return f(this,null,function*(){yield this.loadPayments()})}ionViewWillEnter(){return f(this,null,function*(){yield this.loadPayments()})}loadPayments(){return f(this,null,function*(){this.incomePayments=yield this.paymentService.getByType("income"),this.expensePayments=yield this.paymentService.getByType("expense")})}openAddModal(){return f(this,null,function*(){let l=yield this.modalCtrl.create({component:K,componentProps:{type:this.selectedSegment}});yield l.present();let{data:a}=yield l.onWillDismiss();a?.payment&&(yield this.paymentService.create(a.payment),yield this.loadPayments())})}openEditModal(l){return f(this,null,function*(){let a=yield this.modalCtrl.create({component:K,componentProps:{payment:l,type:l.type}});yield a.present();let{data:i}=yield a.onWillDismiss();i?.payment&&i?.isEdit&&(yield this.paymentService.update(l.id,i.payment),yield this.loadPayments())})}confirmDelete(l){return f(this,null,function*(){yield(yield this.alertCtrl.create({header:"Delete Payment",message:`Are you sure you want to delete "${l.name}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>f(this,null,function*(){yield this.paymentService.delete(l.id),yield this.loadPayments()})}]})).present()})}segmentChanged(l){this.selectedSegment=l.detail.value}};r.\u0275fac=function(a){return new(a||r)(P(we),P($),P(Ee))},r.\u0275cmp=F({type:r,selectors:[["app-recurring-payments"]],decls:21,vars:14,consts:[["noExpenses",""],["noIncome",""],[3,"translucent"],[3,"ngModelChange","ionChange","ngModel"],["value","expense"],["value","income"],[3,"fullscreen"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["slot","start","color","danger",3,"name"],["slot","end","color","danger"],["side","end"],["color","primary",3,"click"],["slot","icon-only","name","create-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"empty-state"],["name","wallet-outline","color","medium"],["color","medium"],["slot","start","color","success",3,"name"],["slot","end","color","success"],["name","cash-outline","color","medium"]],template:function(a,i){a&1&&(e(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-title"),m(3),d(4,"translate"),t()(),e(5,"ion-toolbar")(6,"ion-segment",3),Z("ngModelChange",function(g){return Y(i.selectedSegment,g)||(i.selectedSegment=g),g}),_("ionChange",function(g){return i.segmentChanged(g)}),e(7,"ion-segment-button",4)(8,"ion-label"),m(9),d(10,"translate"),t()(),e(11,"ion-segment-button",5)(12,"ion-label"),m(13),d(14,"translate"),t()()()()(),e(15,"ion-content",6),x(16,We,4,2,"div",7)(17,Ge,4,2,"div",7),e(18,"ion-fab",8)(19,"ion-fab-button",9),_("click",function(){return i.openAddModal()}),c(20,"ion-icon",10),t()()()),a&2&&(s("translucent",!0),o(3),u(v(4,8,"payments.title")),o(3),X("ngModel",i.selectedSegment),o(3),u(v(10,10,"payments.expenses")),o(4),u(v(14,12,"payments.income")),o(2),s("fullscreen",!0),o(),s("ngIf",i.selectedSegment==="expense"),o(),s("ngIf",i.selectedSegment==="income"))},dependencies:[G,de,B,ye,ge,A,R,V,ve,Ie,he,D,Pe,j,L,W,q,z,N,O,ee,T,me,k,ne,be,pe],styles:[".empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:8px 0}.empty-state[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:4px 0}"]});let n=r;return n})();export{at as RecurringPaymentsPage};
